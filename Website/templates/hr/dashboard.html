{% extends "hr/base_hr.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
    <h2>Dashboard</h2>
    <p>Welcome, {{ user.username }} ({{ user.employee_code }})</p>
    <p>Job Title: {{ user.job_title }} | Section: {{ user.section }} | Supervisor: {{ user.supervisor }}</p>
    <p>Leave Balance: {{ user.leave_balance }} days</p>
    <h3>Your Leave Requests</h3>
    {% if leave_requests %}
        <table border="1">
            <tr>
                <th>Leave Type</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
                <th>Applied On</th>
                <th>Details</th>
            </tr>
            {% for leave in leave_requests %}
            <tr>
                <td>{{ leave.leave_type }}</td>
                <td>{{ leave.start_date }}</td>
                <td>{{ leave.end_date }}</td>
                <td>{{ leave.status }}</td>
                <td>{{ leave.applied_on }}</td>
                <td><a href="{{ url_for('hr.leave_details', leave_id=leave.id) }}">View</a></td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No leave requests found.</p>
    {% endif %}
{% endblock %}
